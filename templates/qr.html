<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enroll & Pay - SkillForge</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <style>
    body { background: linear-gradient(135deg, #fff5eb, #ffe0c2); font-family: 'Poppins', sans-serif; }
    .enroll-card { max-width:480px; margin:60px auto; background:#fff; border-radius:20px; padding:30px; box-shadow:0 6px 20px rgba(0,0,0,0.1); text-align:center;}
    .brand { color:#ff7b00; font-weight:700; font-size:24px; }
    #qrcode { margin:20px auto; display:flex; justify-content:center; }
    .btn-skillforge { background:#ff7b00; color:white; font-weight:600; border:none; border-radius:10px; transition:0.3s; }
    .btn-skillforge:hover { background:#e86e00; color:#fff; }
    .tab-content { margin-top:20px; }
    .payment-option { text-align:left; }
  </style>
</head>
<body>

<div class="enroll-card">
  <div class="brand mb-2">SkillForge</div>
  <h4 id="courseName" class="fw-bold mb-3"></h4>
  <h5 class="text-success">Amount: â‚¹<span id="courseAmount"></span></h5>

  <ul class="nav nav-tabs justify-content-center mt-4" id="paymentTabs" role="tablist">
    <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#upi">UPI</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#card">Credit/Debit Card</button></li>
  </ul>

  <div class="tab-content" id="paymentTabsContent">
    <!-- UPI Section -->
    <div class="tab-pane fade show active" id="upi">
      <div id="qrcode"></div>
      <p class="text-muted mt-2">Scan this QR to pay via UPI</p>
    </div>

    <!-- Card Payment Section -->
    <div class="tab-pane fade" id="card">
      <form class="payment-option mt-3">
        <div class="mb-2"><label>Card Number</label><input type="text" class="form-control" placeholder="xxxx-xxxx-xxxx-xxxx"></div>
        <div class="mb-2"><label>Expiry</label><input type="text" class="form-control" placeholder="MM/YY"></div>
        <div class="mb-2"><label>CVV</label><input type="password" class="form-control" placeholder="***"></div>
      </form>
      <p class="text-muted small mt-2">This is a placeholder. Integrate payment gateway for real payment.</p>
    </div>
  </div>

  <button class="btn btn-skillforge w-100 mt-3" id="confirmBtn">Confirm Enrollment</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // --- Read course info from localStorage ---
  const courseName = localStorage.getItem("userCourse") || "Unknown Course";
  const courseAmount = localStorage.getItem("userPrice") || "0";

  document.getElementById("courseName").innerText = courseName;
  document.getElementById("courseAmount").innerText = courseAmount;

  // --- Generate UPI QR ---
  const upiID = "9790297792@ybl"; // Replace with your UPI ID
  const upiLink = `upi://pay?pa=${upiID}&pn=${encodeURIComponent("SkillForge")}&am=${courseAmount}&cu=INR&tn=${encodeURIComponent(courseName)}%20Course%20Payment`;

  new QRCode(document.getElementById("qrcode"), {
    text: upiLink,
    width: 200,
    height: 200
  });

  // --- Confirm Enrollment ---
  document.getElementById("confirmBtn").addEventListener("click", () => {
    const activeTab = document.querySelector('.tab-pane.active').id;
    if(activeTab === "upi") {
      alert("Please scan the QR code to pay via UPI.");
    } else if(activeTab === "card") {
      alert("Card payment form submitted (placeholder). Integrate payment gateway for real payment.");
    }
  });
</script>
</body>
</html>
